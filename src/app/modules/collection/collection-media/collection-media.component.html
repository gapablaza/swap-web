<div *ngIf="!isLoaded" class="loading-indicator">
  <mat-spinner></mat-spinner>
</div>
<section *ngIf="isLoaded" class="collection collection-section">
  <div class="collection-visual">
    <a class="btn" mat-stroked-button color="primary" [routerLink]="['../']">
      <mat-icon inline="true">arrow_back</mat-icon> Volver
    </a>
    <div class="collection-imagen-container">
      <img class="collection-image" [defaultImage]="defaultCollectionImage" [lazyLoad]="collection.image" [alt]="collection.name">
    </div>
  </div>
  <div class="collection-info">
    <h1>Elementos multimedia</h1>
    <h2 *ngIf="showedImages.length">
      Imágenes (<span class="color-accent" *ngIf="showedImages.length != medias.length">
        {{ showedImages.length }} de 
      </span>{{ medias.length }})
    </h2>
    <div class="card">
      <div class="empty-content" *ngIf="!showedImages.length">
        <h2>(｡◕‿‿◕｡)</h2>
        <p>Nadie ha publicado un elemento multimedia... Quieres ser el primero?</p>
        <a class="btn" mat-raised-button color="accent" [routerLink]="['../']">
          <mat-icon inline="true">add_a_photo</mat-icon> Agregar multimedia
        </a>
      </div>
      <div class="controls-std" *ngIf="showedImages.length">
        <mat-form-field class="controls-search" appearance="outline">
          <mat-label>Filtrar por descripción o usuario (nombre / ID)</mat-label>
          <mat-icon matPrefix>search</mat-icon>
          <input matInput type="text" [(ngModel)]="searchText" (ngModelChange)="onFilter()">
          <button *ngIf="searchText" matSuffix mat-icon-button aria-label="Clear" (click)="onClearFilter()">
            <mat-icon>close</mat-icon>
          </button>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Ordenar por</mat-label>
          <mat-select (selectionChange)="onSort()" [(value)]="sortOptionSelected">
            <mat-option *ngFor="let option of sortOptions" [value]="option.selectValue">
              {{ option.selectName }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="images-grid">
        <div *ngFor="let image of showedImages; let i = index; trackBy: trackByImage" class="images-grid-card">
          <div class="images-grid-content">
            <img [lazyLoad]="baseImageUrl + image.id + '.jpg'" alt="" class="images-grid-image">
            <p class="images-grid-author">
              por <a href="">{{ image.user?.data?.displayName }}</a> el {{ image.created * 1000 | date:'dd/MM/yy' }}
            </p>
            <div class="images-grid-likes">
              <mat-icon aria-hidden="false" aria-label="Number of likes">favorite</mat-icon>
              <span>{{ image.totalLikes }}</span>
            </div>
          </div>
          <p class="images-grid-title">
            #{{ i + 1 }} - {{ image.description }}
          </p>
        </div>
      </div>
    </div>

  </div>
</section>